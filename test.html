<!DOCTYPE html>
<html>
<head>
	<title>test</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="//unpkg.com/iview/dist/styles/iview.css">
	<link rel="stylesheet" type="text/css" href="css/upload.css">
	<script src="js/jquery-2.1.1.min.js"></script>
<script src="js/ckeditor/ckeditor.js"></script>
<script src="js/jquery.js"></script>
<script src="https://cdn.bootcss.com/vue/2.2.2/vue.min.js"></script>
<script src="js/lib/axios.min.js"></script>
<script src="js/lib/qs.js"></script>
<script src="js/config/config.js"></script>
<script src="//unpkg.com/iview/dist/iview.min.js"></script>
<script src="js/upload/upload.js"></script>
</head>
<body>
	   <span>                                   文档编辑</span>
       <textarea rows ="100" cols ="80" id ="editor1" name ="editor" ></textarea>
<!--        <input type="button" class="test" value='点我'> -->
       <div id="app">
       <input id="file" type="file" name="test" value="插入图片">
       <button v-on:click="greet">提交</button>
       </div>

</body>
<script type="text/javascript">
	$(function(){
		$(document).ready( function(){
            $( '#editor1').ckeditor();
         });


		$('.test').click(function(){
			// var iframes=document.getElementsByClassName("cke_wysiwyg_frame");
			// console.info(iframes.html);
    		// iframes.contentWindow.focus();
    		// iframes.contentWindow.print();
    		var data=CKEDITOR.instances.editor1.getData();

    		
    		// data = data.replace(/\s/g,'');
    		// data = data.replace(/<\/?[^>]*>/g,''); //去除HTML tag 
    		// data = data.replace(/[ | ]*\n/g,'\n'); //去除行尾空白
    		// data = data.replace(/&nbsp;/ig,'');

    		console.info(data)
    		console.info($('#upload_file').val())
		})
	})

	var app = new Vue({
	  el: '#app',
	  data: {
	    name: 'Vue.js'
	  },
	  // 在 `methods` 对象中定义方法
	  methods: {
	    greet: function (event) {
	                    var file = document.getElementById("file").files[0];
	                    var formdata1=new FormData();// 创建form对象
	                    formdata1.append('img',file,file.name);
	                        // const instance=axios.create({
	                        //   withCredentials: true
	                        // })
	                    var config = {
	                    headers:{'Content-Type':'multipart/form-data'}
	                    };
	                    axios.post('/uploadImg',formdata1,config)
	                          .then(response=>{
	                            console.log(response.data);
	                    })
	                    
	    }
	  }
	})


</script>
</html>